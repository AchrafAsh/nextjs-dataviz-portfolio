{"ast":null,"code":"var _jsxFileName = \"/home/achraf/Documents/coding/dataviz-portfolio/pages/projects/geochart.js\";\nvar __jsx = React.createElement;\nimport React, { useRef, useEffect, useState } from 'react';\nimport { select, geoPath, geoOrthographic, geoMercator, min, max, scaleLinear } from 'd3';\nimport useResizeObserver from '../../components/useResizeObserver';\n\nconst GeoChart = ({\n  data,\n  property\n}) => {\n  const wrapperRef = useRef();\n  const svgRef = useRef();\n  const dimensions = useResizeObserver(wrapperRef);\n  const {\n    0: selectedCountry,\n    1: setSelectedCountry\n  } = useState(null);\n  useEffect(() => {\n    const svg = select(svgRef.current);\n    const minProp = min(data.features, feature => feature.properties[property]);\n    const maxProp = max(data.features, feature => feature.properties[property]);\n    const colorScale = scaleLinear().domain([minProp, maxProp]).range(['#ccc', 'red']);\n    const {\n      width,\n      height\n    } = dimensions || wrapperRef.current.getBoundingClientRect();\n    const projection = geoOrthographic().fitSize([width, height], selectedCountry || data).precision(100);\n    const pathGenerator = geoPath().projection(projection);\n    svg.selectAll('.country').data(data.features).join('path').on('click', feature => setSelectedCountry(selectedCountry === feature ? null : feature)).attr('class', 'country').transition().attr('fill', feature => colorScale(feature.properties[property])).attr('d', feature => pathGenerator(feature));\n    svg.selectAll('.label').data([selectedCountry]).join('text').attr('class', 'label').transition().text(feature => feature && feature.properties.name + ' : ' + feature.properties[property].toLocaleString()).attr('x', 10).attr('y', 25);\n  }, [data, property, dimensions, selectedCountry]);\n  return __jsx(\"div\", {\n    className: \"wrapper\",\n    ref: wrapperRef,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 5\n    }\n  }, __jsx(\"svg\", {\n    ref: svgRef,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 7\n    }\n  }));\n};\n\nfunction GeoChartProject() {\n  const {\n    0: property,\n    1: setProperty\n  } = useState('pop_est');\n  return __jsx(React.Fragment, null, __jsx(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 7\n    }\n  }, \"World Map With d3 Geo\"), __jsx(GeoChart, {\n    data: data,\n    property: property,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 7\n    }\n  }), __jsx(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 7\n    }\n  }, \"Select property to highlight\"), __jsx(\"select\", {\n    value: property,\n    onChange: e => setProperty(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }\n  }, __jsx(\"option\", {\n    disabled: true,\n    selected: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 9\n    }\n  }, \"Chose a property\"), __jsx(\"option\", {\n    value: \"pop_est\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 9\n    }\n  }, \"Population\"), __jsx(\"option\", {\n    value: \"name_len\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 9\n    }\n  }, \"Name length\"), __jsx(\"option\", {\n    value: \"gdp_md_est\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 9\n    }\n  }, \"GDP\")));\n}\n\nexport default GeoChartProject;","map":{"version":3,"sources":["/home/achraf/Documents/coding/dataviz-portfolio/pages/projects/geochart.js"],"names":["React","useRef","useEffect","useState","select","geoPath","geoOrthographic","geoMercator","min","max","scaleLinear","useResizeObserver","GeoChart","data","property","wrapperRef","svgRef","dimensions","selectedCountry","setSelectedCountry","svg","current","minProp","features","feature","properties","maxProp","colorScale","domain","range","width","height","getBoundingClientRect","projection","fitSize","precision","pathGenerator","selectAll","join","on","attr","transition","text","name","toLocaleString","GeoChartProject","setProperty","e","target","value"],"mappings":"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","sourcesContent":["import React, { useRef, useEffect, useState } from 'react';\nimport {\n  select,\n  geoPath,\n  geoOrthographic,\n  geoMercator,\n  min,\n  max,\n  scaleLinear\n} from 'd3';\nimport useResizeObserver from '../../components/useResizeObserver';\n\nconst GeoChart = ({ data, property }) => {\n  const wrapperRef = useRef();\n  const svgRef = useRef();\n  const dimensions = useResizeObserver(wrapperRef);\n  const [selectedCountry, setSelectedCountry] = useState(null);\n\n  useEffect(() => {\n    const svg = select(svgRef.current);\n\n    const minProp = min(data.features, feature => feature.properties[property]);\n    const maxProp = max(data.features, feature => feature.properties[property]);\n    const colorScale = scaleLinear()\n      .domain([minProp, maxProp])\n      .range(['#ccc', 'red']);\n\n    const { width, height } =\n      dimensions || wrapperRef.current.getBoundingClientRect();\n\n    const projection = geoOrthographic()\n      .fitSize([width, height], selectedCountry || data)\n      .precision(100);\n    const pathGenerator = geoPath().projection(projection);\n\n    svg\n      .selectAll('.country')\n      .data(data.features)\n      .join('path')\n      .on('click', feature =>\n        setSelectedCountry(selectedCountry === feature ? null : feature)\n      )\n      .attr('class', 'country')\n      .transition()\n      .attr('fill', feature => colorScale(feature.properties[property]))\n      .attr('d', feature => pathGenerator(feature));\n\n    svg\n      .selectAll('.label')\n      .data([selectedCountry])\n      .join('text')\n      .attr('class', 'label')\n      .transition()\n      .text(\n        feature =>\n          feature &&\n          feature.properties.name +\n            ' : ' +\n            feature.properties[property].toLocaleString()\n      )\n      .attr('x', 10)\n      .attr('y', 25);\n  }, [data, property, dimensions, selectedCountry]);\n\n  return (\n    <div className='wrapper' ref={wrapperRef}>\n      <svg ref={svgRef}></svg>\n    </div>\n  );\n};\n\nfunction GeoChartProject() {\n  const [property, setProperty] = useState('pop_est');\n\n  return (\n    <>\n      <h2>World Map With d3 Geo</h2>\n      <GeoChart data={data} property={property} />\n      <h3>Select property to highlight</h3>\n      <select value={property} onChange={e => setProperty(e.target.value)}>\n        <option disabled selected>\n          Chose a property\n        </option>\n        <option value='pop_est'>Population</option>\n        <option value='name_len'>Name length</option>\n        <option value='gdp_md_est'>GDP</option>\n      </select>\n    </>\n  );\n}\n\nexport default GeoChartProject;\n"]},"metadata":{},"sourceType":"module"}