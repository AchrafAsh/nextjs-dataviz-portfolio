{"ast":null,"code":"var _jsxFileName = \"/home/achraf/Documents/coding/dataviz-portfolio/pages/projects/animatedtreechart.js\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { useEffect, useState, useRef } from 'react';\nimport { select, hierarchy, tree, linkHorizontal } from 'd3';\nimport useResizeObserver from '../../components/useResizeObserver';\n\nconst TreeChart = ({\n  data\n}) => {\n  const svgRef = useRef();\n  const wrapperRef = useRef();\n  const dimensions = useResizeObserver(wrapperRef);\n  useEffect(() => {\n    const svg = select(svgRef.current);\n    if (!dimensions) return;\n    const root = hierarchy(data);\n    const treeLayout = tree().size([dimensions.height, dimensions.width]);\n    treeLayout(root);\n    console.log(root.descendants());\n    const linkGenerator = linkHorizontal() //   .source(link => link.source)\n    //   .target(link => link.target)\n    .x(node => node.y).y(node => node.x); // rendering nodes\n\n    svg.selectAll('.node').data(root.descendants()).join('circle').attr('class', 'node').attr('r', 4).attr('fill', 'black').attr('cx', node => node.y).attr('cy', node => node.x).attr('opacity', 0).transition().delay(node => node.depth * 500).attr('opacity', 1); // rendering links\n\n    svg.selectAll('.link').data(root.links()).join('path').attr('class', 'link').attr('fill', 'none').attr('stroke', 'black').attr('d', linkGenerator).attr('stroke-dasharray', function () {\n      const length = this.getTotalLength();\n      return `${length} ${length}`;\n    }).attr('stroke-dashoffset', function () {\n      return this.getTotalLength();\n    }).transition().duration(500).delay(linkObj => linkObj.source.depth * 500).attr('stroke-dashoffset', 0); // labels\n\n    svg.selectAll('.label').data(root.descendants()).join('text').attr('class', 'label').text(node => node.data.name).attr('x', node => node.y).attr('y', node => node.x - 10).attr('text-anchor', 'middle').attr('font-size', '24px').attr('opacity', 0).transition().delay(node => node.depth * 500).attr('opacity', 1);\n  }, [data, dimensions]);\n  return __jsx(\"div\", {\n    className: \"wrapper\",\n    ref: wrapperRef,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 5\n    }\n  }, __jsx(\"svg\", {\n    ref: svgRef,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 7\n    }\n  }));\n};\n\nfunction AnimatedTreeChartProject() {\n  const initialData = {\n    name: 'ðŸ‘¨',\n    children: [{\n      name: 'ðŸ‘§',\n      children: [{\n        name: 'ðŸ‘¦'\n      }, {\n        name: 'ðŸ‘¦ðŸ‘¦'\n      }, {\n        name: 'ðŸ‘¦ðŸ‘§'\n      }]\n    }, {\n      name: 'ðŸ‘¦'\n    }]\n  };\n  const {\n    0: data,\n    1: setData\n  } = useState(initialData);\n  return __jsx(React.Fragment, null, __jsx(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 7\n    }\n  }, \"Animated Tree Chart\"), __jsx(TreeChart, {\n    data: data,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 7\n    }\n  }), __jsx(\"button\", {\n    onClick: () => setData(initialData.children[0]),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 7\n    }\n  }, \"Update Data\"), __jsx(\"button\", {\n    onClick: () => setData(initialData),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 7\n    }\n  }, \"Back To Start\"));\n}\n\nexport default AnimatedTreeChartProject;","map":{"version":3,"sources":["/home/achraf/Documents/coding/dataviz-portfolio/pages/projects/animatedtreechart.js"],"names":["useEffect","useState","useRef","select","hierarchy","tree","linkHorizontal","useResizeObserver","TreeChart","data","svgRef","wrapperRef","dimensions","svg","current","root","treeLayout","size","height","width","console","log","descendants","linkGenerator","x","node","y","selectAll","join","attr","transition","delay","depth","links","length","getTotalLength","duration","linkObj","source","text","name","AnimatedTreeChartProject","initialData","children","setData"],"mappings":"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","sourcesContent":["import { useEffect, useState, useRef } from 'react';\nimport { select, hierarchy, tree, linkHorizontal } from 'd3';\nimport useResizeObserver from '../../components/useResizeObserver';\n\nconst TreeChart = ({ data }) => {\n  const svgRef = useRef();\n  const wrapperRef = useRef();\n  const dimensions = useResizeObserver(wrapperRef);\n\n  useEffect(() => {\n    const svg = select(svgRef.current);\n\n    if (!dimensions) return;\n\n    const root = hierarchy(data);\n\n    const treeLayout = tree().size([dimensions.height, dimensions.width]);\n    treeLayout(root);\n    console.log(root.descendants());\n\n    const linkGenerator = linkHorizontal()\n      //   .source(link => link.source)\n      //   .target(link => link.target)\n      .x(node => node.y)\n      .y(node => node.x);\n\n    // rendering nodes\n    svg\n      .selectAll('.node')\n      .data(root.descendants())\n      .join('circle')\n      .attr('class', 'node')\n      .attr('r', 4)\n      .attr('fill', 'black')\n      .attr('cx', node => node.y)\n      .attr('cy', node => node.x)\n      .attr('opacity', 0)\n      .transition()\n      .delay(node => node.depth * 500)\n      .attr('opacity', 1);\n\n    // rendering links\n    svg\n      .selectAll('.link')\n      .data(root.links())\n      .join('path')\n      .attr('class', 'link')\n      .attr('fill', 'none')\n      .attr('stroke', 'black')\n      .attr('d', linkGenerator)\n      .attr('stroke-dasharray', function() {\n        const length = this.getTotalLength();\n        return `${length} ${length}`;\n      })\n      .attr('stroke-dashoffset', function() {\n        return this.getTotalLength();\n      })\n      .transition()\n      .duration(500)\n      .delay(linkObj => linkObj.source.depth * 500)\n      .attr('stroke-dashoffset', 0);\n\n    // labels\n    svg\n      .selectAll('.label')\n      .data(root.descendants())\n      .join('text')\n      .attr('class', 'label')\n      .text(node => node.data.name)\n      .attr('x', node => node.y)\n      .attr('y', node => node.x - 10)\n      .attr('text-anchor', 'middle')\n      .attr('font-size', '24px')\n      .attr('opacity', 0)\n      .transition()\n      .delay(node => node.depth * 500)\n      .attr('opacity', 1);\n  }, [data, dimensions]);\n  return (\n    <div className='wrapper' ref={wrapperRef}>\n      <svg ref={svgRef}></svg>\n    </div>\n  );\n};\n\nfunction AnimatedTreeChartProject() {\n  const initialData = {\n    name: 'ðŸ‘¨',\n    children: [\n      {\n        name: 'ðŸ‘§',\n        children: [\n          {\n            name: 'ðŸ‘¦'\n          },\n          {\n            name: 'ðŸ‘¦ðŸ‘¦'\n          },\n          {\n            name: 'ðŸ‘¦ðŸ‘§'\n          }\n        ]\n      },\n      {\n        name: 'ðŸ‘¦'\n      }\n    ]\n  };\n  const [data, setData] = useState(initialData);\n\n  return (\n    <>\n      <h1>Animated Tree Chart</h1>\n      <TreeChart data={data} />\n      <button onClick={() => setData(initialData.children[0])}>\n        Update Data\n      </button>\n      <button onClick={() => setData(initialData)}>Back To Start</button>\n    </>\n  );\n}\n\nexport default AnimatedTreeChartProject;\n"]},"metadata":{},"sourceType":"module"}